<table class="table table-hover table-bordered align-middle text-center table-sm">
  <thead>
    <tr>
      <th colspan="3">Potency</th>
      <th rowspan="2">Ingredient</th>
    </tr>
    <tr>
      <th>Magnitude</th>
      <th>Duration</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
    {% for potency, ingredients in effect.ingredients_by_potencies %}
    {% for ingredient in ingredients | sort(attribute='accessibility_factor') %}
    <tr>
      {% if loop.first %}
      <td rowspan="{{ ingredients | length }}">
        {% include "snippets/potency/magnitude.html.jinja" %}
      </td>
      <td rowspan="{{ ingredients | length }}">
        {% include "snippets/potency/duration.html.jinja" %}
      </td>
      <td rowspan="{{ ingredients | length }}">
        {% include "snippets/potency/price.html.jinja" %}
      </td>
      {% endif %}
      <td class="">
        {% include "snippets/ingredient/link.html.jinja" %}
      </td>
    </tr>
    {% endfor %}
    {% endfor %}
  </tbody>
</table>