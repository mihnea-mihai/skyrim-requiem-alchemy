{% extends "default.html.jinja" %}
{% block title %}
{{ effect.name }}
{% endblock title %}
{% block content %}
<section>
  <h2>Ingredients</h2>
  {% include "snippets/effect/ingredients.html.jinja" %}
</section>
<section>
  <h2>Potions</h2>
  <table id="potions" data-page-length="100" class="table table-hover table-bordered align-middle text-center table-sm">
    <thead>
      <tr>
        <th>Potencies</th>
        <th>Ingredients</th>
        <th>Accessibility</th>
        <th>Price</th>
        <th>Minimum accessibility sum</th>
      </tr>
    </thead>
    <tbody>
      {% for potencies, potions in effect.grouped_potions %}
      {% for potion in potions | select("is_recommended_potion") %}
      <tr>
        {% if loop.first %}
        <td rowspan="{{ loop.length }}">
          <div class="d-flex flex-wrap flex-row justify-content-center">
            {% for potency in potencies %}
            <div class="px-1">
              {% include "snippets/potency/short.html.jinja" %}
            </div>
            {% endfor %}
          </div>
        </td>
        {% endif %}
        <td>
          <div class="d-flex flex-wrap flex-row justify-content-center">
            {% for ingredient in potion.ingredients %}
            <div class="px-1">
              {% include "snippets/ingredient/link.html.jinja" %}
            </div>
            {% endfor %}
          </div>
        </td>
        <td>
        {{ potion.accessibility | round(1) }}
        </td>
        <td>
        {{ potion.price | round(1)}}
        </td>
      </tr>
      {% endfor %}
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock content %}
